Laboratoire: Introdution au M√©dia sur IP
----------------------------------------

Sponsoris√© par:

![logo](https://site-cbc.radio-canada.ca/site/annual-reports/2014-2015/_images/about/services/cbc-radio-canada.png)

# Contexte

Ce laboratoire consiste √† mettre en application des concepts de r√©seautique pour le transport de
contenu audiovisuel et √† se familiariser avec des outils logiciels de traitement de ce m√™me contenu.
Les concepts abord√©s s‚Äôappliquent √† de r√©elles situations de production m√©dia _live_ ainsi qu‚Äôaux
r√©seaux de distribution par c√¢ble, satellite  ou _web_. Les ressources √† moindre co√ªt employ√©es dans
cet exercice sont bas√©es sur du mat√©riel aussi g√©n√©rique que possible, sur des logiciels libres et
des protocoles de transport/contr√¥le m√©dia standards.

# Pr√©-requis

* mod√®le OSI
* concept de routage, couches 2 et 3
* exp√©rience avec Wireshark
* exp√©rience avec en configuration de commutateur/routeur
* (terminal Linux)
* (base de Python)

# Objectifs d‚Äôapprentissage

## Comp√©tences

Le but de l'exercice est de b√¢tir une cha√Æne de traitement m√©dia _live_ afin d'obtenir un programme,
c'est-√†-dire un flux audiovisuel distribuable. La r√©alisation de ce produit est sem√© d'emb√ªches
r√©alistes mais la m√©thodologie rigoureuse employ√©e permet de les surmonter par de la validation
syst√©matique. Les t√¢ches suivantes visent √† d√©velopper cette m√©thodologie permettant d'op√©rer
horizontalement (aux differents points du chemin de donn√©es) et verticalement (√† travers les
diff√©rentes couches technologiques).

* __installer et configurer__ les √©quipements d‚Äôune cha√Æne de production afin de produire un contenu en direct
* __d√©boguer__ le chemin du flux de donn√©e
* __mesurer__ le trafic √† diff√©rents points du r√©seau
* __juger__ la qualit√© du r√©sultat
* __identifier__ les contraintes techniques compromettant cette qualit√© perceptuelle
* __tester__ et fixer diff√©rents param√®tres afin de trouver le meilleur compromis

Un autre but de cette d√©marche est de cr√©er un pont cognitif entre l'osbervation de
donn√©es tr√®s bas niveau et l'exp√©rience du m√©dia temps r√©el.

## Connaissances

Chacun des 3 th√®mes suivant sera abord√©. Ces listes exhaustives ne
pourront √™tre enti√®rement couvertes mais sont ordonn√©es par priorit√©s.

R√©seaux:

* __routage__ L2: multicast, IGMP
* __transport__: UDP vs TCP, RTP
* __delai/jitter__ absorb√© par buffer et __optimisation__ par QoS (comment induire du d√©lai?)
* __routage__ L3

M√©dia:

* __protocoles__ de transport: retrouver les donn√©es m√©dia dans les paquets IP
* __formats__ audio, vid√©o, meta-donn√©es
* __contraintes__: trouver l'√©quilibre entre qualit√© du signal, bande passante et d√©lai
* __codecs__: h264, aac
* __luma__ vs __chroma__
* __echantillonnage__

IT:

* __Linux Shell__: configurer un syst√®me (comme un encodeur vid√©o) _headless_ par ssh
* __scripting__: contr√¥ler et/ou surveiller un √©quipement ou service √† travers un _web API_
* __couche de contr√¥le__ des signaux avec [NMOS](https://specs.amwa.tv/nmos/)
* __infonuagique__: distribution du signal de sortie sur une platforme en ligne

# Aper√ßu

![apercu](./img/laboratoire_media_sur_IP_phase5.png)
*[Diagramme source](https://docs.google.com/drawings/d/1q6MF5KY4nLmCBxLiehqOJvOSK_qoAchkg8bCS-ulvEI/edit)*

Le point de d√©part est une cam√©ra qui fournit le
signal source qu'il faut v√©hiculer sur un r√©seau IP. Puis un mixeur permettra d'ins√©rer d'autres
√©l√©ments graphiques ou sonnores (fichiers, _webcam_ etc.) et permettra aussi d'ajuster certains
param√®tres (colorim√©trie, volume sonore, etc.). Ce r√©sultat sera finalement compress√© et converti
dans un format adapt√© au transport sur Internet.

# Requis techniques

* 2 PCs
* commutateur Cisco simple
* une cam√©ra IP
* logiciels libres: VLC, OBS, etc. Wireshark

[Guide de l'instructeur.](./guide-instructeur.md)ü§ì

# D√©roulement

1. pr√©paration et branchement du mat√©riel: une source (cam√©ra) + un canal (r√©seau) + une destination (moniteur)
2. configuration d‚Äôune cha√Æne m√©dia simple
3. insertion d'un √©quipement inconnu
4. utilisation d‚Äôun mixeur et ajout de nouvelles sources 
5. formatage du flux de sortie

[C'est parti!](./laboratoire.md)üöÄ
